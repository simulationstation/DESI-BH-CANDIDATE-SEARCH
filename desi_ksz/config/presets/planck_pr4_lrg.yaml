# DESI kSZ Analysis Configuration
# Planck PR4 + DESI LRG

# Pipeline identification
name: "Planck PR4 x DESI LRG"
description: "Pairwise kSZ analysis using Planck PR4 CMB maps and DESI LRG galaxies"
version: "1.0"

# Galaxy catalog settings
catalog:
  tracer: "LRG"
  data_source: "DESI DR1 LSS"
  data_dir: "data/ksz/catalogs"
  redshift_bins:
    - [0.4, 0.6]
    - [0.6, 0.8]
    - [0.8, 1.0]
  quality_cuts:
    z_flag: 0
    nobs_min: 1
    stellar_contamination: true

# CMB map settings
cmb:
  source: "planck_pr4"
  component: "commander"  # or "smica"
  data_dir: "data/ksz/maps"
  nside: 2048
  beam_fwhm_arcmin: 5.0  # Planck resolution

# Aperture photometry settings
aperture:
  theta_inner: 3.0   # arcmin (larger for Planck resolution)
  theta_outer: 8.0   # arcmin
  compensated: true

# Pairwise estimator settings
estimator:
  separation_bins:
    min: 20.0
    max: 150.0
    n_bins: 12  # Fewer bins for larger beam
  max_separation: 200.0

# Covariance estimation
covariance:
  method: "jackknife"
  n_regions: 100
  region_method: "healpix"
  hartlap_correction: true

# Null tests
null_tests:
  tests:
    - shuffle_temperatures
    - scramble_redshifts
    - hemisphere_split
    - even_odd_split
  n_realizations: 1000
  pte_threshold: 0.05

# Inference settings
inference:
  method: "analytic"
  prior_bounds:
    A_ksz: [-5.0, 5.0]

# Output settings
output:
  base_dir: "data/ksz/planck"
  formats:
    - csv
    - fits
  plots:
    format: pdf
    style: paper

# Cosmology (Planck 2018)
cosmology:
  H0: 67.36
  Om0: 0.3153
  Ob0: 0.0493
  sigma8: 0.8111
  ns: 0.9649
